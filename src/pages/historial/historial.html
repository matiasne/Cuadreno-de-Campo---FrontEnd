<!--
  Generated template for the HistorialPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>  
    <ion-navbar>
      <ion-title>
        {{titulo}}
      </ion-title>   
      <ion-buttons end>      
        <button ion-button icon-only (click)="Cancelar();">
          <ion-icon class="icono-btn" name="close">
          </ion-icon>
        </button>      
      </ion-buttons>    
    </ion-navbar>
  </ion-header>


<ion-content padding>
    
    
      <ion-item>
        <ion-label>Filtrar Eventos:</ion-label>
        <ion-select name="lotes" [(ngModel)]="filtro" [ngModelOptions]="{standalone: true}">
          <ion-option value="all">  Todo  </ion-option> 
          <ion-option value="8">  Tareas  </ion-option>
          <ion-option value="9">  Visitas  </ion-option>
        </ion-select>
      </ion-item>  
   
    <ion-row>
      
      <ion-col>           
        <ion-item>
          <ion-label>Desde</ion-label>
          <ion-input type="date" [(ngModel)]="fechaDesde" name="fecha" ></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>           
        <ion-item>
          <ion-label>Hasta</ion-label>
          <ion-input type="date" [(ngModel)]="fechaHasta" name="fecha" ></ion-input>
        </ion-item>
      </ion-col>
             
        
    </ion-row> 
    <button ion-button block (click)="Buscar()"><ion-icon name="search" ></ion-icon> Buscar</button>    
    <ion-list>
    
    <div *ngFor="let item of itemsHistorial"  class="contenido-historial">   
      <ion-item *ngIf="item.tipo == 1 && (filtro == 'all' || filtro == item.tipo)" (click)="presentComentarioModal(item.idLink)">
        <ion-avatar class="icono-item">
          <ion-icon name="chatboxes"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 2 && (filtro == 'all' || filtro == item.tipo)" (click)="presentComentarioModal(item.idLink)">
        <ion-avatar class="icono-item">
          <ion-icon name="chatboxes"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item" >{{item.texto}}</h2><br>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 3 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="home"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item" >{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 4 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="home"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 5 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="leaf"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 6 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="leaf"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 7 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="leaf"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 8 && (filtro == 'all' || filtro == item.tipo)" (click)="presentTareaModal(item.idLink)">
        <ion-avatar class="icono-item">
          <ion-icon name="speedometer"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 9 && (filtro == 'all' || filtro == item.tipo)" (click)="presentVisitaModal(item.idLink)">
        <ion-avatar class="icono-item">
          <ion-icon name="analytics"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 10 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="crop"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

      <ion-item *ngIf="item.tipo == 11 && (filtro == 'all' || filtro == item.tipo)">
        <ion-avatar class="icono-item">
          <ion-icon name="crop"></ion-icon>
        </ion-avatar>
        <div class="contenido-item">
          <h2 class="texto-item">{{item.texto}}</h2>
          <p class="datos-item">{{item.nombreUsuario}} {{item.fecha}} </p>
        </div>
      </ion-item>

    </div>
  </ion-list>

</ion-content>
